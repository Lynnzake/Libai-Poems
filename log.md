
## 2020/8/8 更新爬虫文件和数据处理文件，添加一个简易的模型

1. 爬虫采用scrapy框架
2. 数据处理包括文本格式清洗，n-grams语言模型的构建，以及相关的分词处理
3. 更新一个简单的模型Model1，准确率很低，损失很高，后续再做调整

## 2020/8/9 更新模型model2
模型1的准确率很低，在想是不是因为数据长度过长的原因，尝试对除五言，七言之外的诗句进行截断
1. 查看Token3.txt可以发现，
      落叶别树，
      飘零随风。


      客无所托，
      悲与此同。
  存在这样的情况，故重写生成Tokens的sequenceForToken2()函数，对数据的长度等进行处理

2. 整理之前最长序列长度为16，使用截断，当长度大于8时进行截断处理，虽影响了部分句子的完整性，但值得一试。
  new_input_sequences = []
  for x in input_sequences:
      if len(x) > 8:
          x = x[:8]
          new_input_sequences.append(x)
      else:
          new_input_sequences.append(x)

3. 此方法试过之后并不如意，结果比Model1还差.接下来试着调整模型1参数.在调试的过程中发现，随着Embedding层维度的降低，模型的准确率提高了，我的理解是这样的：因为古诗的选词讲究的是“推敲”二字，所以语言更加精炼，也导致各个字之间的关联性可能并没有那么高，试着降低维度,发现提高的并不多。下一步准备尝试增加数据吧。
    Embedding(total_words,16,input_length=max_sequence_len-1), 迭代50次之后模型的准确率为0.2350
    
## 2020/8/10 增加数据之后发现模型准确率仍然很低，考虑从定长的五言、七言开始训练Model3
### 模型——迭代次数50epochs，输入序列长度为5
   Embedding(total_words,16,input_length=max_sequence_len-1),
   Bidirectional(LSTM(64,return_sequences=True)),
   Bidirectional(LSTM(32)),
   训练对象：**五言诗**
   训练准确率：77%
   然而预测结果：山道觞觞觞觞
   从预测结果看，模型可能存在过拟合的现象，暂且不添加Dropout层，先试试调整Emedding层及LSTM的单元个数的大小，数字依次为各层参数
#### 调整Embedding层的参数
1. 32，64，32  训练准确率：**77%**
2. 64,64,32    训练准确率：70.27%
3. 128，64，32   训练准确率：64.40%   
4. 16，64，32   训练准确率：75.52%  
#### 固定Embedding层的大小，调整第一个LSTM层的大小
1. 32，32，32     训练准确率：**76.97%**,图像趋于平缓，但预测结果并没有什么改变，如“山隐心心心心”
2. 32，16，32     训练准确率：73.98%
3. 32，128，32     训练准确率：69.45% 
#### 从上面可知，32,64,32时的准确率最高，以此为基准，调试第二层LSTM的维度
0. 32，64，8      训练准确率较低
1. 32，64，16     训练准确率：56.94% 
2. 32，64，32     训练准确率：**77%**
3. 32，64，64     训练准确率：**84.94%** ，预测结果为“山远花花花花”
4. 32，64，128    训练准确率：**90.46%** ，预测结果为“山公生生生生”
5. 32，64，256    训练准确率：**91.98%** ，预测结果为“山阴名名名名”
**在训练的过程中发现随着单元数的增加，一般是2倍增加，每次迭代所消耗的时间大致也在两倍；这也是可以理解的，毕竟都是WX+b的形式**
最后，发现无论模型的准确率多高，都只能预测到前3个子，尝试增加输入序列的长度
## 2020/8/11 模型——迭代次数50epochs，输入序列长度为10，尝试将两个句子叠加成一个
模型参数，由前一天的训练结果，选取准确率在75%以上的模型参数进行调试
1. 32，32，32       loss: 0.9879 - accuracy: 0.7462，预测结果为“山阴名名名名”
2. 32，64，32       loss: 1.3118 - accuracy: 0.6672
3. 32，64，64       loss: 0.5944 - accuracy: 0.8437山火伤伤伤伤
4. 32，64，128      loss: 0.7626 - accuracy: 0.8019山空人人人人
5. 32，64，256


